<!DOCTYPE html>
<html lang="”ja”">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game</title>
  </head>

  <body>
    <h1><span>Verbs</span> 動詞 1701-1718</h1>
    <div id="app" class="container">
      <button v-on:click="gameStart" v-if="startFlg != true">START</button>

      <div v-if="startFlg == true" class="mainContainer">
        <h1 class="question mb-20">{{ questionList[0][0]}}</h1>
        <div class="textBoxWrapper mb-20">
          <input class="mb-20" id="textbox" v-model="typeBox" type="text" />
        </div>

        <div class="guageWrapper mb-20">
          <div class="guage" v-bind:style="styleObject"></div>
        </div>
        <div>{{ current_counts }}/{{ this.question_length-1 }}</div>
      </div>
      <div class="ans">
        <div class="answers"></div>
      </div>
    </div>
  </body>
</html>

<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<script>
  Vue.createApp({
    data() {
      return {
        textForm: "",
        typeBox: "",
        questionList: [
          ["あきらかにする", "clarify"],
          ["粉々に砕く", "smash"],
          ["悲しむ", "mourn"],
          ["粉々にする", "shatter"],
          ["呼ぶ", "summon"],
          ["残る", "linger"],
          ["嘆く", "lament"],
          ["喜ぶ", "rejoice"],
          ["配分する", "allocate"],
          ["ピシャリと打つ", "slap"],
          ["主張する。 ____that", "contend"],
          ["誓う", "swear"],
          ["識別する", "discern"],
          ["悪化させる", "degrade"],
          ["築く", "erect"],
          ["証言する", "testify"],
          ["駆り立てる", "spur"],
          ["才能に恵まれる。be ____ with", "endowed"],
          ["CLEAR!", "summon"],
        ],
        startFlg: "",
        current_counts: 0,
        question_counts: 0,
      };
    },
    computed: {
      styleObject: function () {
        width = (100 / (this.question_length - 1)) * this.current_counts + "%";
        if (this.current_counts == this.question_length - 1) {
          color = "#03a9f4";
        } else {
          color = "tomato";
        }
        return {
          width: width,
          "background-color": color,
        };
      },
    },
    methods: {
      gameStart() {
        this.startFlg = true;
        this.$nextTick(function () {
          document.getElementById("textbox").focus();
        });
      },
    },
    mounted: function () {
      this.question_length = this.questionList.length;
      console.log(this.question_length);
    },
    watch: {
      typeBox: function () {
        const a = document.getElementById("textbox");
        const div = document.querySelector(".answers");

        // console.log(this.questionList[0][1]);
        // console.log(a.value);
        if (a.value === this.questionList[0][1]) {
          alert(this.questionList[0][1]);
          let addDiv = document.createElement("div");
          addDiv.textContent = this.questionList[0][1];
          div.appendChild(addDiv);
          this.questionList.splice(0, 1);
          this.typeBox = "";
          this.current_counts++;
        } else if (a.value.length > 10 && a.valu != this.questionList[0][1]) {
          console.log("try again");
          this.typeBox = "";
        }
      },
    },
  }).mount("#app");
</script>

<style>
  * {
    font-family: inherit;
    font-family: inherit;
    line-height: inherit;
  }
  span {
    color: rgb(41, 123, 155);
  }

  body,
  html {
    max-width: 360px;
    font-size: 12px;
  }

  .container {
    max-width: 360px;
    margin: 0 auto;
    text-align: center;
  }

  button {
    height: 50px;
    font-size: 32px;
    background-color: #333;
    color: #fff;
    padding: 4px 60px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  .question {
    text-align: left;
  }

  #textbox {
    max-width: 360px;
    text-align: left;
    outline: none;
    border: none;
    font-size: 32px;
  }

  .textBoxWrapper {
    border-bottom: 1px solid grey;
  }

  .guage {
    height: 12px;
    transition: all 0.5s ease;
  }
  .guageWrapper {
    border: 1px solid;
    height: 12px;
  }

  .mb-20 {
    margin-bottom: 20px;
  }
  .answers {
    font-size: 16px;
  }
</style>
